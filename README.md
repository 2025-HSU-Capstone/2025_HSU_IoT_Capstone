# 🌱 2025 HSU IoT Capstone Design – 스마트팜 시스템

**한성대학교 2025 캡스톤디자인 디자인 : AI와 IoT가 만들어주는 자동 식물 성장 케어 시스템**

> 본 프로젝트는 라즈베리파이(Raspberry Pi)와 다양한 센서 및 카메라 모듈을 활용하여 식물의 생장을 자동으로 모니터링하고 관리하는 스마트팜 시스템을 개발하는 것을 목표로 합니다.

## 📁 프로젝트 구조

```
2025_HSU_IoT_Capstone/
├── DetectPlant/            # 카메라 모듈3, YOLO, ArUco Marker를 이용하여 식물의 키 측정
├── CaptureEveryAnHour/     # 한 시간마다 식물 사진 촬영
├── AutoSensorControl/      # 자동 센싱, 센서 상태 확인, 하루에 한 번 사진 촬영 및 센서 값 전송
├── Arduino/                # Arduino UNO 보드에 업로드
├── server/                 # 프론트 / 백엔드 Flask 서버와 통신
├── dev/frontend            # 프론트 : 자동 일기, 성장 지표 그래프, 타임 랩스 생성
├── dev/backend             # 백엔드 : 각 센서들의 수치, 사진 및 데이터 저장
└── README.md               # 프로젝트 설명서
```

## 🌱 주요 기능

- **자동 환경 조성** : 사용자가 키울 식물을 입력하면 해당 식물이 자라는 데에 필요한 생장 조건에 맞춰 자동 급수, 조명 제어 환경이 조성됩니다.
- **실시간 모니터링** : 각종 센서(조도 센서, 토양 수분 감지 센서, 온습도 센서, CO2 감지 센서)를 통해 환경을 실시간으로 모니터링 합니다.
- **식물 사진 촬영** : CSI 카메라를 이용하여 주기적으로 식물 이미지를 촬영합니다.
- **객체 감지 및 키 측정** : YOLOv8 객체 감지 모델과 OpenCV의 ArUco 마커를 조합하여 식물의 키를 정확히 측정합니다.
- **자동 일기 생성** : 수집한 데이터 값들을 기반으로 날마다 자동 식물 성장 일기를 작성해줍니다.
- **성장 지표 시각화 및 타임랩스 생성** : 키우는 식물의 키 성장 그래프를 작성해주고, 식물이 성장하는 모습을 담은 타임랩스를 생성해줍니다.

## 🛠️ 설치 및 실행 방법

### 1. Raspberry Pi에서 실행

- 카메라 및 센서 장치가 연결된 라즈베리파이에서 실행합니다.

```bash
# 저장소 클론
git clone https://github.com/2025-HSU-Capstone/2025_HSU_IoT_Capstone.git
cd 2025_HSU_IoT_Capstone/raspberrypi

# 가상환경 생성 및 활성화
python3 -m venv venv
source venv/bin/activate

# 필요 패키지 설치
pip install -r requirements.txt

# 메인 스크립트 실행 (예: 1시간마다 촬영 및 서버 전송)
python RaspberryPi_last.py
```

### 2. GPU 서버에서 YOLO + SAM 추론 서버 실행

```bash
cd AI_capstone
# 가상환경 진입 후
python infer_loop.py  # 새 이미지 생성 시 자동 추론 및 서버 전송
```

### 3. 3. Flask 서버 실행 (레시피 생성 등)

```bash
cd server
# 환경 변수 설정 (.env 파일 필요)
export FLASK_APP=server.py
flask run --host=0.0.0.0 --port=5000
```

⚠️ 모든 디바이스는 동일한 네트워크(Wi-Fi) 상에 있어야 합니다.


## 📊 데이터 예시

| 날짜 및 시간         | 식물 키 (cm) | 온도    | 습도    | 조도    | 토양 수분 (%) |
|---------------------|--------------|---------|--------|---------|-----------|
| 2025-05-26 12:00:00 | 12.7         | 25.4    | 50     | 71      | 68        |
| 2025-05-27 12:00:00 | 13.1         | 25.8    | 49     | 77      | 68        |
| 2025-05-28 12:00:00 | 13.5         | 25.7    | 47     | 82      | 66        |

## 🖼️ 제작 판넬
![제작 판넬](스마트%20팜.png)


## 👥 팀원 소개

| 이름   | 역할                     |
|--------|--------------------------|
| 허현준 | 식물 키 측정 알고리즘 개발 및 타임랩스 자동 생성 구현 |
| 이현승 | 자동 센서 제어 및 데이터 처리, 자동 일기 작성 구현 |
| 이나은 | 데이터 분석 및 시각화, DB 설계 및 웹 UI 구현 |

## 📄 라이선스

본 프로젝트는 MIT 라이선스를 따릅니다. 자세한 내용은 `LICENSE` 파일을 참고하세요.
